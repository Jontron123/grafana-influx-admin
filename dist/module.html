<div ng-switch="ctrl.panel.mode">
  <div ng-switch-when="current">

      <div class="search-results-container" ng-style="{height: ctrl.height, border: '0px solid red'}">
        <a ng-repeat="qinfo in ctrl.queryInfo.queries | orderBy:'-secs'"
          ng-click="ctrl.askToKillQuery( qinfo )"
          class="search-item pointer" 
          title="Kill Query" 
          href="#">
          <span class="search-result-tags">
            &nbsp;&nbsp;<i class="fa fa-ban"></i>
          </span>
          <span class="label label-tag" style="background-color: rgb(109, 31, 98); border-color: rgb(147, 69, 136);">
            {{ qinfo.time }}
          </span>&nbsp;
          <span class="label label-tag" style="background-color: rgb(153, 68, 10); border-color: rgb(191, 106, 48);">
            {{ qinfo.db }}
          </span>&nbsp;
          <span class="label label-tag" style="background-color: rgb(153, 68, 10); border-color: rgb(191, 106, 48);">
            {{ qinfo.id }}
          </span>&nbsp;
          <span class="search-result-link">
            {{ qinfo.query }}
          </span>
        </a>
      </div>

  </div>
  <div ng-switch-when="query">

    <form class="gf-form" ng-submit="ctrl.onSubmit()">
        <a class="gf-form-label tight-form-func dropdown-toggle" 
          gf-dropdown="ctrl.getQueryTemplates();" 
          data-toggle="dropdown"
          data-placement="top"><i class="fa fa-bookmark-o"></i></a>
        <input class="gf-form-input gf-form-grow" type="text" ng-model="ctrl.query" placeholder="Enter your influx Query" />
        <a ng-click="ctrl.onSubmit()" class="btn btn-inverse"><i class="fa fa-search"></i></a>
      </div>
    </form>
    <div>
      <span style="float:right;">1.3s</span>
    </div>
    <div style="clear:both;"></div>

    <div ng-show="ctrl.error != null" class="alert alert-error" style="margin-bottom:8px;">
      <i class="fa fa-warning"></i> &nbsp; {{ ctrl.error }}
    </div>

    <div ng-repeat="res in ctrl.rsp">
      <div ng-repeat="rrr in res">
        <div ng-repeat="series in rrr.series" style="margin-bottom:20px;">

          <h3 class="page-heading">{{series.name}}</h3>
          <table class="grafana-options-table">
          <tr class="admin-settings-section">
            <td ng-repeat="col in series.columns track by $index">
            {{ col }} &nbsp; 
            </td>
          </tr>

          <tr ng-repeat="row in series.values track by $index">
            <td ng-repeat="col in row track by $index">
              {{ col }} &nbsp;
            </td>
          </tr>
          </table>

        </div>
      </div>
    </div>


  </div>
  <div ng-switch-default>
    <h1>Unknown mode: {{ctrl.panel.mode}}</h1>
  </div>
</div>


